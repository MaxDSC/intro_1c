# Вступление 1С
#### В данном проекте знакомлюсь с основами конфигурации и программирования в 1С:Предприятие. В работе использую книгу "1C:Предприятие 8.3. Практическое пособие разработчика. Примеры и типовые приемы. Издание 3" (авторы М. Г. Радченко, Е. Ю. Хрусталева) и руководство по [1C:Enterprise Development Tools](https://its.1c.ru/db/edtdoc). На Github выкладывается версия конфигурации для 1С:EDT, но паралленьно делаю еще такую же в конфигураторе, чтобы осваивать две среды разработки.
## Используемое ПО
- Java версия: openjdk version "17.0.16" 2025-07-15 LTS от [Bellsoft](https://github.com/bell-sw/Liberica/releases)
- Учебная (не Комьюнити-лицензия) версия 1С:Предприятие 8.3.27.1508 [(скачано с официального сайта)](https://v8.1c.ru/podderzhka-i-obuchenie/uchebnye-versii/distributiv-1s-predpriyatie-8-3-versiya-dlya-obucheniya-programmirovaniyu/)
- 1С:EDT Start программа запуска версии 0.8.0.429 [(скачано с официального сайта)](https://edt.1c.ru/)
- 1C:EDT среда разработки версия Ruby 2024.2.6
- Операционная система Windows 11
- Тестировал через толстый клиент

## Проделанная работа
1. Публикация на Github
- Через меню групповой разработки при нажатии ПКМ на проект создал новый git репозиторий, в который добавилась конфигурация.
- Перешел в папку с git-репозиторием и выполнил команду в терминале `git add --all` для индексации всех файлов в проекте, то же самое можно сделать из EDT в git перспективе, выбрав в меню "Индексирование Git" и нажав иконку с двумя плюсами.
- Сделал коммит командой `git commit -m "Первый коммит"`, то же самое можно сделать из EDT в git перспективе, нажав на кнопку "Фиксировать".
- В [руководстве](https://its.1c.ru/db/edtdoc#content:263:hdoc) к EDT связь к удаленному репозиторию осуществляется через HTTPS и токен разработчика GitHub, но я установил связь через SSH.
- Для связи через SSH в терминале выполнил команду `ssh-keygen.exe` и всегда нажать enter, после этого в папке пользователя `.shh/` сгенереруется публичный ключ с расширением `.pub`.
- В Windows для чтения содержимого можно использовать команду `type` к файлу `.pub`, это будет строка публичного ключа, которую надо скопировать в `Github->Settings->SSH and GPG keys->New SSH key` в поле Key.
- Для публикации использовал интерфейс EDT - Кнопка "Отправить в HEAD", для первого подключения нужно лишь заполнить поле URL, которое берется из репозитория Github и выбрать протокол SSH, аунтефикацию заполнять не надо.
- Можно опубликовать проект через консоль командами `git remote add origin <ваш URL>`, затем `git push origin master`.
2. Справочник `НомераТелефонов`
  - Создал справчник `НомераТелефонов` с реквизитами `Номер` и `Оператор` (строка), стандартный реквизит `Наименование` изменил на `ФИО`.
  - Для реквизита `Номер` установил фиксированную строку с 18 символами и маской `\+\7 (999) 999 99-99`.
  - Создал форму справочника с такими же реквизитами.
  - В модуле формы программно добавил кнопку ([см. код](https://github.com/MaxDSC/intro_1c/blob/master/ТестоваяКонфигурация1/src/Catalogs/НомераТелефонов/Forms/ФормаЭлемента/Module.bsl)), которая позволяет опеределить оператора связи (в минимальном приближении) по трем цифрам из поля "Номер" на форме согласно установленной маске, а также заполнить поле "Оператор" соответствующим оператором.
  - Для извлечения номера из формы использовал функцию `РеквизитФормыВЗначение`, а для заполнения поля на форме `РеквизитФормыВЗначение` и `ЗначениеВРеквизитФормы`.
  - Для проверки строки номера телефона с маской использовал функцию `СтрПодобнаПоРегулярномуВыражению`.
3. Общий модуль `РандомайзерВызовСервера` ([см. код](https://github.com/MaxDSC/intro_1c/blob/develop/ТестоваяКонфигурация1/src/CommonModules/РандомайзерВызовСервера/Module.bsl))
  - Функция `ПолучитьСлучайноеЧисло(От, До)` генерирует случайное число в интервале.
  - Функция `ПолучитьСлучайныйЭлементИзМассива(Знач Масс)` выбирает случайный элемент из массива `Масс`.
4. В подсистеме `Телефония` переделан справочник `ТелефонныеНомера`([см. код](https://github.com/MaxDSC/intro_1c/blob/develop/ТестоваяКонфигурация1/src/Catalogs/ТелефонныеНомера/Forms/ФормаЭлемента/Module.bsl)
  - Реквизиты: `Номер` и `Оператор` (строка), стандартный реквизит `Наименование` изменил на `ФИО`.
  - Для реквизита `Номер` установил фиксированную строку с 18 символами и маской `\+\7 (999) 999 99-99`.
  - В модуле формы элемента при нажатии кнопки `Определить` выполняется запрос к справочнику  `ОператорыМобильнойСвязи` на поиск оператора по номеру телефона.
  - В событии `Перед записью` выполняется проверка поля `Номер` на соответствие маски с помощью функции `СтрПодобнаПоРегулярномуВыражению`.
5. Добавлен общий модуль `ДиалогКлиент`([см. код](https://github.com/MaxDSC/intro_1c/blob/develop/ТестоваяКонфигурация1/src/CommonModules/ДиалогКлиент/Module.bsl)), в котором реализована процедура общения с пользователем на клиенте.
6. Общая форма `ФормаДляПроверкиБанковскогоСчета` ([см. код](https://github.com/MaxDSC/intro_1c/blob/develop/ТестоваяКонфигурация1/src/CommonForms/ФормаДляПроверкиБанковскогоСчета/Module.bsl))
  - Добавил на данную форму поле `Расчетный счет` (ограничено 20 разрядами) и кнопку `Случайный счет`, при нажатии на которую в поле заносится случайное значение расчетного счета из функции `СгенерироватьСлучайныйРасчетныйСчет(КодыА, КодыВ)`.
  - `КодыА` и `КодыВ` это массивы кодов первого порядка и валюты. Они создаются на клиенте единожды в событии `ПриСоздании` с помощью запросов к справочникам. Так как коды второго порядка (ББ) зависят от кодов первого порядка (ААА), то они генерируются запросом при каждом выполнении функции.
  - Для генерации первых восьми цифр расчетного счета (ААА ББ ВВВ) были созданы два справочника: 
    - `КодыРасчетногоСчета` - хранит ААА по реквизиту `КодПервогоПорядка` и ББ по реквизиту `КодВторогоПорядка` табличной части `КодыВторогоПорядка` (Для каждого ААА кода свой список ББ кодов);
	- `КодыВалютДляРачетногоСчета` - хранит ВВВ коды валюты по реквизиту `КодВалюты`;
	- к данным справочникам генерируются запросы с помощью общего модуля `ПростыеЗапросы`  (и к табличной части справочника `КодыРасчетногоСчета`) для извлечения массива соответствующих кодов, затем в этих масcивах выбирается случайный элемент с помощью функции `ПолучитьСлучайныйЭлементИзМассива` общего модуля `РандомайзерВызовСервера`.	
  - Создана кнопка `Создать файл`, при нажатии на которую возникают диалоговые окна (функция `ПолучитьРезультатДиалога`), в которых надо указать количество генерируемых счетов и папку сохранения файла. Функция `ЗаписатьРасчетныеСчетаВФайл` записывает случайный расчетный счет в файл.
7. Общий модуль `ПростыеЗапросы` ([см. код](https://github.com/MaxDSC/intro_1c/blob/develop/ТестоваяКонфигурация1/src/CommonModules/ПростыеЗапросы/Module.bsl))
  - Функция `ПолучитьВыборку(ТекстЗапроса, ИмяПарам = Неопределено, Парам = Неопределено)` создает выборку (тип `ВыборкаИзРезультатаЗапроса`) по тексту запроса, а также по тексту запроса и параметру (имя и сам параметр).
  - Функция `ВМассивПоКолонке(Выборка, Колонка)` создает массив из выборки под одной из колонок.
  - Функция `ВыполнитьЗапросПоПолю(ТекстЗапроса, Поле, ИмяПарам = Неопределено, Парам = Неопределено)` выполняет запрос на выборку записей по полю и переводит его в массив или одиночное значение. По сути объединяет работу функции `ПолучитьВыборку(ТекстЗапроса, ИмяПарам = Неопределено, Парам = Неопределено)` и  `ВМассивПоКолонке(Выборка, Колонка)` в одной функции.
  - Функция ` ПолучитьСсылкуПоКоду(НазваниеОбъекта, Код)` позволяет извлечь ссылку на запись справочника по коду записи.
